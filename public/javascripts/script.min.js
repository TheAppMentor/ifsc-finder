$(document).ready(function(){$('.masthead').visibility({once:!1,onBottomPassed:function(){$('.fixed.menu').transition('fade in')},onBottomPassedReverse:function(){$('.fixed.menu').transition('fade out')}});$('.ui.sidebar').sidebar('attach events','.toc.item');$('.ui.dropdown').dropdown({action:'hide',placeholder:'Fetching Bank Details',onChange:function(value,text,$selectedItem){processFindBankDiv(text)}})
$("#findBankSearchField.ui.search").search({type:'category',apiSettings:{url:"/getBanks/?q={query}"},selectFirstResult:!0,minCharacters:1,onResponse:function(theresponse){console.log("The Response is "+theresponse)
return theresponse},fields:{categories:'results',categoryName:'name',categoryResults:'results',description:'description',results:'results',title:'title',action:'action',},onSelect(result,response){console.log("Result is : "+JSON.stringify(result))
console.log("Response is : "+JSON.stringify(response))
console.log("Response is : "+result.title)
let bankName=result.title
$("#findBankSearchField.ui.search").data("selectedBank",bankName)
updateDomForLocationSearch(bankName)
return response}});function updateDomForLocationSearch(bankName){var xmlhttp=new XMLHttpRequest();xmlhttp.onreadystatechange=function(){if(this.readyState==4&&this.status==200){var myObj=JSON.parse(this.responseText);var tag=document.createElement("script");tag.src="javascripts/searchCity.js";document.getElementsByTagName("head")[0].appendChild(tag);document.getElementById('findLocationSegment').outerHTML=myObj.div_locationSearch
document.getElementById('infoDivShowingLocationSearch').outerHTML=myObj.div_info
document.getElementById('findLocationFindBranchGroupSeg').setAttribute("style","display:block;border:none;")
$('html, body').animate({scrollTop:$('#divider_findLocation').offset().top},'slow')}}
let finalPath="/getDomForLocationSearch/?bankName="+bankName
console.log("Final Path is ... : "+finalPath)
xmlhttp.open("GET",finalPath,!0);xmlhttp.send()}
jQuery(document).ready(function($){var alterClass=function(){var ww=document.body.clientWidth;if(ww<400){$("#bankSearchField.ui.search").removeClass("huge").addClass("medium");$("#locationSearchField.ui.search").removeClass("huge").addClass("medium");$("#branchSearchField.ui.search").removeClass("huge").addClass("medium")}else if(ww>=401){$("#bankSearchField.ui.search").addClass("huge").removeClass("medium");$("#locationSearchField.ui.search").addClass("huge").removeClass("medium");$("#branchSearchField.ui.search").addClass("huge").removeClass("medium")}};$(window).resize(function(){alterClass()});alterClass()})});function findLocationsForBank(selectedBankName){var xmlhttp=new XMLHttpRequest();xmlhttp.onreadystatechange=function(){if(this.readyState==4&&this.status==200){var myObj=JSON.parse(this.responseText);console.log("WE got back a locations list.... "+JSON.stringify(myObj))}}
let fullPath=window.location.search.substring(1);let finalPath="/getLocationList/?"+fullPath+'&bankName='+selectedBankName
console.log("Final Path is ... : "+finalPath)
xmlhttp.open("GET",finalPath,!0);xmlhttp.send();$('html, body').animate({scrollTop:$('#findLocationSegment').offset().top},'slow')}
function processFindBankDiv(selectedBankName){var xmlhttp=new XMLHttpRequest();xmlhttp.onreadystatechange=function(){if(this.readyState==4&&this.status==200){var myObj=JSON.parse(this.responseText);document.getElementById('steps-div').outerHTML=myObj.div_steps
document.getElementById('statistics-segment').innerHTML=myObj.div_stats
document.getElementById('menuboy').outerHTML=myObj.div_dropdown
document.getElementById('findBank').id="findCity"
$('.ui.dropdown').dropdown()
$('.ui.dropdown').removeClass("loading")
$('.ui.dropdown').dropdown('setting','onChange',function(value,text,$selectedItem){if(this.id=="findCity"){processFindCityDiv(xmlhttp.getResponseHeader("bankName"),text)}})}}
$('.ui.dropdown').addClass("loading")
let fullPath=window.location.search.substring(1);let finalPath="/getLocations/?"+fullPath+'&bankName='+selectedBankName
xmlhttp.open("GET",finalPath,!0);xmlhttp.setRequestHeader("bankName",selectedBankName)
xmlhttp.send()}
function processFindCityDiv(selectedBankName,selectedCity){var xmlhttp=new XMLHttpRequest();xmlhttp.onreadystatechange=function(){if(this.readyState==4&&this.status==200){$('.ui.dropdown').removeClass("loading")
var myObj=JSON.parse(this.responseText);document.getElementById('steps-div').outerHTML=myObj.div_steps
document.getElementById('statistics-segment').innerHTML=myObj.div_stats
$('.ui.dropdown').replaceWith(myObj.div_dropdown)
$('.ui.dropdown').dropdown({placeHolder:"Search Bank Branch",onChange:function(value,text,$selectedItem){let selectedBranch=text
let selectedBankName=xmlhttp.getResponseHeader("bankName")
let selectedLocationName=xmlhttp.getResponseHeader("cityName")
processFindBranchDiv(selectedBankName,selectedLocationName,selectedBranch)}})}}
$('.ui.dropdown').addClass("loading")
let fullPath=window.location.search.substring(1);let finalPath="/getBranches/?"+fullPath+'&bankName='+selectedBankName+'&cityName='+selectedCity
xmlhttp.open("GET",finalPath,!0);xmlhttp.setRequestHeader("bankName",selectedBankName)
xmlhttp.setRequestHeader("cityName",selectedCity)
xmlhttp.send()}
function processFindBranchDiv(selectedBank,selectedCity,selectedBranch){var xmlhttp=new XMLHttpRequest();xmlhttp.onreadystatechange=function(){if(this.readyState==4&&this.status==200){var myObj=JSON.parse(this.responseText);document.getElementById('steps-div').innerHTML=myObj.div_steps
document.getElementById('statistics-segment').innerHTML=myObj.div_stats
document.getElementById('modal-finalResult').innerHTML=myObj.div_modal
new ClipboardJS('#button-copy-ifsc');$('.ui.dropdown').removeClass("loading")
$('html, body').animate({scrollTop:$('#statistics-segment').offset().top},'slow');$('.ui.modal').modal({}).modal('show')}}
let fullPath=window.location.search.substring(1);let finalPath="/getBranchDetails/?"+fullPath+'&bankName='+selectedBank+'&cityName='+selectedCity+"&branchName="+selectedBranch
$('.ui.dropdown').addClass("loading")
xmlhttp.open("GET",finalPath,!0);xmlhttp.setRequestHeader("bankName",selectedBank)
xmlhttp.setRequestHeader("cityName",selectedCity)
xmlhttp.setRequestHeader("branchName",selectedBranch)
xmlhttp.send()}
function fetchAllBankNames(){var xmlhttp=new XMLHttpRequest();xmlhttp.onreadystatechange=function(){if(this.readyState==4&&this.status==200){var myObj=JSON.parse(this.responseText);console.log("Got back JSON object.. "+JSON.stringify(myObj))
console.log("Cat Bef "+categoryContent1)
categoryContent1=myObj
console.log("Cat aft"+categoryContent1)}}
let fullPath=window.location.search.substring(1);let finalPath="/getBanks/"
xmlhttp.open("GET",finalPath,!0);xmlhttp.send()}
